<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Glamour Photos</title>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '1917534028524906',
        cookie     : true,
        xfbml      : true,
        version    : 'v2.8'
      });
      FB.AppEvents.logPageView();
    };

    window.buildScript = function(url, id){
      (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = url;
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', id));
    }

    window.imageSearch = function(query) {
      var sanitizedQuery = encodeURI(query)
      buildScript(`https://www.googleapis.com/customsearch/v1?key=AIzaSyBxtW8zQvuO7ozICe4M7_S_cbOjd-orjVs&cx=011867728287033795387:pl7k6xyfyxk&searchType=image&q=${sanitizedQuery}&callback=hndlr`, null);
    }

    buildScript("http://connect.facebook.net/en_US/sdk.js", 'facebook-jssdk')

  </script>

  <script src="//www.google.com/jsapi"></script>
</head>

<body>
    <div class="container">
      <form>
        <label for="firstName">Enter your First Name</label>
        <br />
        <input type="text" name="firstName" id="firstNameBox" />
        <input type="submit" value="submit" />
      </form>
      <div id="content"></div>
    </div>
    <script type="text/javascript">
      function hndlr(response) {
        for (var i = 0; i < response.items.length; i++) {
          var item = response.items[i];
          document.getElementById("content").innerHTML += `<br> <img src="${item.link}" />`;
        }
      }
      var search = location.search.substring(1);
      var queryObject = JSON.parse('{"' + decodeURI(search).replace(/"/g, '\\"').replace(/&/g, '","').replace(/=/g,'":"') + '"}')

      if(queryObject.firstName.length > 0) {
        document.getElementById('firstNameBox').value = queryObject.firstName;
        imageSearch(`${queryObject.firstName} glamour shot`);
      }
    </script>
    <!-- <script src="https://www.googleapis.com/customsearch/v1?key=AIzaSyBxtW8zQvuO7ozICe4M7_S_cbOjd-orjVs&cx=011867728287033795387:pl7k6xyfyxk&searchType=image&q=keith+glamour+shot&callback=hndlr">
    </script> -->
</body>
